server:
  port: 9002

redis:
  addr: localhost:6379
  password: ""
  db: 0
  pool_size: 50
  
ytdlp:
  binary_path: "yt-dlp"
  timeout: 60                    # 解析超时(秒)
  max_concurrent: 10             # 最大并发解析数
  cookies_dir: "/etc/vasset/cookies"
  # 代理配置 (支持 http/https/socks5)
  proxy: ""                      # 例如: "socks5://127.0.0.1:1080" 或 "http://127.0.0.1:7890"
  # 默认参数 (应用于所有平台)
  default_args:
    - "--no-playlist"
    - "--no-warnings"
    - "--ignore-errors"
    - "--no-check-certificates"
    # JavaScript 运行时配置 (解析 YouTube 需要)
    - "--js-runtimes"
    - "node"
  
cache:
  ttl: 3600                      # 缓存1小时
  max_size: 10000                # 最多缓存10000个URL
  
platforms:
  youtube:
    enabled: true
    cookie_file: ""  # 留空，使用动态获取的 cookie
    extra_args:
      - "--user-agent"
      - "\'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\'"
      - "--sleep-requests"
      - "1"
      - "--sleep-interval"
      - "5"
  
  bilibili:
    enabled: true
    cookie_file: ""
    extra_args:
      - "--extractor-args"
      - "bilibili:referer=https://www.bilibili.com"
  
  tiktok:
    enabled: true
    cookie_file: ""
    extra_args:
      - "--extractor-args"
      - "tiktok:api_hostname=api22-normal-c-alisg.tiktokv.com"
  
  generic:
    enabled: true

# Asset 服务配置
asset_service:
  addr: "vasset-asset:9004"           # Asset 服务地址（修正端口）
  timeout: 5                          # gRPC 超时（秒）
  enable_cookies: true                # 启用 Cookie 获取
  cookie_temp_dir: "/tmp/parser-cookies"  # Cookie 临时文件目录
